<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard - Student Management System</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Sidebar -->
    <div class="sidebar">
        <div class="sidebar-header">
            <i class="fas fa-graduation-cap fa-2x"></i>
            <h3>EduAdmin</h3>
        </div>
        <div class="sidebar-menu">
            <ul>
                <li><a href="#" onclick="showDashboard()"><i class="fas fa-tachometer-alt"></i> <span>Dashboard</span></a></li>
                <li><a href="#" onclick="showStudents()"><i class="fas fa-users"></i> <span>Students</span></a></li>
                <li><a href="#" onclick="showTeachers()"><i class="fas fa-chalkboard-teacher"></i> <span>Teachers</span></a></li>
                <li><a href="#" onclick="showStaff()"><i class="fas fa-user-tie"></i> <span>Staff</span></a></li>
                <li><a href="#" onclick="showAnnouncements()"><i class="fas fa-bullhorn"></i> <span>Announcements</span></a></li>
            </ul>
        </div>
    </div>

    <!-- Main Content -->
    <div class="main-content">
        <!-- Dashboard Section -->
        <div id="dashboard-section">
            <!-- Header -->
            <div class="header">
                <h1>Admin Dashboard</h1>
                <div class="user-profile" onclick="showProfile()">
                    <img src="https://ui-avatars.com/api/?name=Admin+User&background=4361ee&color=fff" alt="Admin User">
                    <div class="user-info">
                        <h4>Admin User</h4>
                        <p>Administrator</p>
                    </div>
                </div>
            </div>

            <!-- Cards -->
            <div class="cards-container">
                <div class="card">
                    <div class="card-header">
                        <div>
                            <h3 id="students-count">0</h3>
                            <p>Students</p>
                        </div>
                        <div class="card-icon students">
                            <i class="fas fa-users"></i>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <div>
                            <h3 id="teachers-count">0</h3>
                            <p>Teachers</p>
                        </div>
                        <div class="card-icon teachers">
                            <i class="fas fa-chalkboard-teacher"></i>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <div>
                            <h3 id="staff-count">0</h3>
                            <p>Staff Members</p>
                        </div>
                        <div class="card-icon staff">
                            <i class="fas fa-user-tie"></i>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <div>
                            <h3 id="announcements-count">0</h3>
                            <p>Announcements</p>
                        </div>
                        <div class="card-icon events">
                            <i class="fas fa-bullhorn"></i>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Recent Activity -->
            <div class="recent-activity">
                <div class="section-header">
                    <h2>Recent Activity</h2>
                    <a href="#">View All</a>
                </div>
                <ul class="activity-list" id="activity-list">
                    <!-- Activities will be loaded here -->
                </ul>
            </div>

            <!-- Announcements -->
            <div class="announcements">
                <div class="section-header">
                    <h2>Latest Announcements</h2>
                    <a href="#" class="btn btn-add" onclick="showAddAnnouncementModal()">Add New</a>
                </div>
                <div id="announcements-list">
                    <!-- Announcements will be loaded here -->
                </div>
            </div>
        </div>

        <!-- Students Section -->
        <div id="students-section" style="display: none;">
            <div class="header">
                <h1>Student Management</h1>
                <button class="btn btn-add" onclick="showAddStudentModal()">Add Student</button>
            </div>
            <table class="data-table">
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Name</th>
                        <th>Email</th>
                        <th>Grade</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody id="students-table-body">
                    <!-- Students will be loaded here -->
                </tbody>
            </table>
        </div>

        <!-- Teachers Section -->
        <div id="teachers-section" style="display: none;">
            <div class="header">
                <h1>Teacher Management</h1>
                <button class="btn btn-add" onclick="showAddTeacherModal()">Add Teacher</button>
            </div>
            <table class="data-table">
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Name</th>
                        <th>Email</th>
                        <th>Subject</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody id="teachers-table-body">
                    <!-- Teachers will be loaded here -->
                </tbody>
            </table>
        </div>

        <!-- Staff Section -->
        <div id="staff-section" style="display: none;">
            <div class="header">
                <h1>Staff Management</h1>
                <button class="btn btn-add" onclick="showAddStaffModal()">Add Staff</button>
            </div>
            <table class="data-table">
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Name</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody id="staff-table-body">
                    <!-- Staff will be loaded here -->
                </tbody>
            </table>
        </div>

        <!-- Announcements Section -->
        <div id="announcements-section" style="display: none;">
            <div class="header">
                <h1>Announcement Management</h1>
                <button class="btn btn-add" onclick="showAddAnnouncementModal()">Add Announcement</button>
            </div>
            <table class="data-table">
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Title</th>
                        <th>Date</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody id="announcements-table-body">
                    <!-- Announcements will be loaded here -->
                </tbody>
            </table>
        </div>
    </div>

    <!-- Add Student Modal -->
    <div id="student-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="student-modal-title">Add New Student</h2>
                <button class="close-btn" onclick="closeModal('student-modal')">&times;</button>
            </div>
            <form id="student-form">
                <input type="hidden" id="student-id">
                <div class="form-group">
                    <label for="student-name">Name</label>
                    <input type="text" id="student-name" required>
                </div>
                <div class="form-group">
                    <label for="student-email">Email</label>
                    <input type="email" id="student-email" required>
                </div>
                <div class="form-group">
                    <label for="student-grade">Grade</label>
                    <input type="text" id="student-grade" required>
                </div>
                <div class="form-actions">
                    <button type="button" class="btn btn-cancel" onclick="closeModal('student-modal')">Cancel</button>
                    <button type="submit" class="btn">Save</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Add Teacher Modal -->
    <div id="teacher-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="teacher-modal-title">Add New Teacher</h2>
                <button class="close-btn" onclick="closeModal('teacher-modal')">&times;</button>
            </div>
            <form id="teacher-form">
                <input type="hidden" id="teacher-id">
                <div class="form-group">
                    <label for="teacher-name">Name</label>
                    <input type="text" id="teacher-name" required>
                </div>
                <div class="form-group">
                    <label for="teacher-email">Email</label>
                    <input type="email" id="teacher-email" required>
                </div>
                <div class="form-group">
                    <label for="teacher-subject">Subject</label>
                    <input type="text" id="teacher-subject" required>
                </div>
                <div class="form-actions">
                    <button type="button" class="btn btn-cancel" onclick="closeModal('teacher-modal')">Cancel</button>
                    <button type="submit" class="btn">Save</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Add Staff Modal -->
    <div id="staff-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="staff-modal-title">Add New Staff</h2>
                <button class="close-btn" onclick="closeModal('staff-modal')">&times;</button>
            </div>
            <form id="staff-form">
                <input type="hidden" id="staff-id">
                <div class="form-group">
                    <label for="staff-name">Name</label>
                    <input type="text" id="staff-name" required>
                </div>
                <div class="form-group">
                    <label for="staff-email">Email</label>
                    <input type="email" id="staff-email" required>
                </div>
                <div class="form-group">
                    <label for="staff-position">Position</label>
                    <input type="text" id="staff-position" required>
                </div>
                <div class="form-actions">
                    <button type="button" class="btn btn-cancel" onclick="closeModal('staff-modal')">Cancel</button>
                    <button type="submit" class="btn">Save</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Add Announcement Modal -->
    <div id="announcement-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="announcement-modal-title">Add New Announcement</h2>
                <button class="close-btn" onclick="closeModal('announcement-modal')">&times;</button>
            </div>
            <form id="announcement-form">
                <input type="hidden" id="announcement-id">
                <div class="form-group">
                    <label for="announcement-title">Title</label>
                    <input type="text" id="announcement-title" required>
                </div>
                <div class="form-group">
                    <label for="announcement-date">Date</label>
                    <input type="date" id="announcement-date" required>
                </div>
                <div class="form-group">
                    <label for="announcement-content">Content</label>
                    <textarea id="announcement-content" required></textarea>
                </div>
                <div class="form-actions">
                    <button type="button" class="btn btn-cancel" onclick="closeModal('announcement-modal')">Cancel</button>
                    <button type="submit" class="btn">Save</button>
                </div>
            </form>
        </div>
    </div>

    <!-- All Modals (Student, Teacher, Staff, Announcement) -->
    <!-- ... (same as before) ... -->
    <script>
        // API Base URL
        const API_BASE_URL = 'http://localhost:3000/api';
    
        // Helper function for API calls
        async function fetchData(url) {
        const response = await fetch(url);
        if (!response.ok) {
            throw new Error(`HTTP error! Status: ${response.status}`);
        }
        return await response.json();
    }
    
        // UI Functions
        function showDashboard() {
            hideAllSections();
            document.getElementById('dashboard-section').style.display = 'block';
            updateDashboardCounts();
            loadActivities();
            loadAnnouncements();
        }
    
        function showStudents() {
            hideAllSections();
            document.getElementById('students-section').style.display = 'block';
            loadStudents();
        }
    
        function showTeachers() {
            hideAllSections();
            document.getElementById('teachers-section').style.display = 'block';
            loadTeachers();
        }
    
        function showStaff() {
            hideAllSections();
            document.getElementById('staff-section').style.display = 'block';
            loadStaff();
        }
    
        function showAnnouncements() {
            hideAllSections();
            document.getElementById('announcements-section').style.display = 'block';
            loadAnnouncementsTable();
        }
    
        function hideAllSections() {
            document.getElementById('dashboard-section').style.display = 'none';
            document.getElementById('students-section').style.display = 'none';
            document.getElementById('teachers-section').style.display = 'none';
            document.getElementById('staff-section').style.display = 'none';
            document.getElementById('announcements-section').style.display = 'none';
        }
    
        function showModal(modalId) {
            document.getElementById(modalId).style.display = 'flex';
        }
    
        function closeModal(modalId) {
            document.getElementById(modalId).style.display = 'none';
            document.getElementById(modalId.replace('-modal', '-form')).reset();
        }
    
        // Student Functions
        function showAddStudentModal() {
            document.getElementById('student-modal-title').textContent = 'Add New Student';
            document.getElementById('student-id').value = '';
            document.getElementById('student-form').reset();
            showModal('student-modal');
        }
    
        function showEditStudentModal(student) {
            document.getElementById('student-modal-title').textContent = 'Edit Student';
            document.getElementById('student-id').value = student.id;
            document.getElementById('student-name').value = student.name;
            document.getElementById('student-email').value = student.email;
            document.getElementById('student-grade').value = student.grade;
            showModal('student-modal');
        }
    
        async function loadStudents() {
            try {
                const students = await fetchData('/admin/students');
                const tbody = document.getElementById('students-table-body');
                tbody.innerHTML = '';
                
                students.forEach(student => {
                    const tr = document.createElement('tr');
                    tr.innerHTML = `
                        <td>${student.id}</td>
                        <td>${student.name}</td>
                        <td>${student.email}</td>
                        <td>${student.grade}</td>
                        <td>
                            <button class="action-btn edit-btn" onclick="showEditStudentModal(${JSON.stringify(student).replace(/"/g, '&quot;')})">Edit</button>
                            <button class="action-btn delete-btn" onclick="deleteStudent(${student.id})">Delete</button>
                        </td>
                    `;
                    tbody.appendChild(tr);
                });
            } catch (error) {
                alert('Failed to load students: ' + error.message);
            }
        }
    
        async function deleteStudent(id) {
            if (confirm('Are you sure you want to delete this student?')) {
                try {
                    await fetchData(`/admin/students/${id}`, { method: 'DELETE' });
                    loadStudents();
                    updateDashboardCounts();
                } catch (error) {
                    alert('Failed to delete student: ' + error.message);
                }
            }
        }
    
        document.getElementById('student-form').addEventListener('submit', async function (e) {
    e.preventDefault();

    const name = encodeURIComponent(document.getElementById('student-name').value);
    const email = encodeURIComponent(document.getElementById('student-email').value);
    const grade = encodeURIComponent(document.getElementById('student-grade').value);

    try {
        const response = await fetch(`/admin/students?name=${name}&email=${email}&grade=${grade}`, {
            method: 'POST'
        });

        const result = await response.json();

        if (response.ok) {
            alert('Student added successfully!');
            closeModal('student-modal');
            document.getElementById('student-form').reset();
        } else {
            alert(result.message || 'Failed to add student.');
        }
    } catch (error) {
        console.error('Error adding student:', error);
        alert('Error connecting to server.');
    }
});

    
        // Teacher Functions
        function showAddTeacherModal() {
            document.getElementById('teacher-modal-title').textContent = 'Add New Teacher';
            document.getElementById('teacher-id').value = '';
            document.getElementById('teacher-form').reset();
            showModal('teacher-modal');
        }
    
        function showEditTeacherModal(teacher) {
            document.getElementById('teacher-modal-title').textContent = 'Edit Teacher';
            document.getElementById('teacher-id').value = teacher.id;
            document.getElementById('teacher-name').value = teacher.name;
            document.getElementById('teacher-email').value = teacher.email;
            document.getElementById('teacher-subject').value = teacher.subject;
            showModal('teacher-modal');
        }
    
        async function loadTeachers() {
            try {
                const teachers = await fetchData('/admin/teachers');
                const tbody = document.getElementById('teachers-table-body');
                tbody.innerHTML = '';
                
                teachers.forEach(teacher => {
                    const tr = document.createElement('tr');
                    tr.innerHTML = `
                        <td>${teacher.id}</td>
                        <td>${teacher.name}</td>
                        <td>${teacher.email}</td>
                        <td>${teacher.subject}</td>
                        <td>
                            <button class="action-btn edit-btn" onclick="showEditTeacherModal(${JSON.stringify(teacher).replace(/"/g, '&quot;')})">Edit</button>
                            <button class="action-btn delete-btn" onclick="deleteTeacher(${teacher.id})">Delete</button>
                        </td>
                    `;
                    tbody.appendChild(tr);
                });
            } catch (error) {
                alert('Failed to load teachers: ' + error.message);
            }
        }
    
        async function deleteTeacher(id) {
            if (confirm('Are you sure you want to delete this teacher?')) {
                try {
                    await fetchData(`/admin/teachers/${id}`, { method: 'DELETE' });
                    loadTeachers();
                    updateDashboardCounts();
                } catch (error) {
                    alert('Failed to delete teacher: ' + error.message);
                }
            }
        }
    
        document.getElementById('teacher-form').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const teacher = {
                name: document.getElementById('teacher-name').value,
                email: document.getElementById('teacher-email').value,
                subject: document.getElementById('teacher-subject').value
            };
            
            const id = document.getElementById('teacher-id').value;
            
            try {
                if (id) {
                    await fetchData(`/admin/teachers/${id}`, {
                        method: 'PUT',
                        body: JSON.stringify(teacher)
                    });
                } else {
                    await fetchData('/teachers', {
                        method: 'POST',
                        body: JSON.stringify(teacher)
                    });
                }
                
                closeModal('teacher-modal');
                loadTeachers();
                updateDashboardCounts();
            } catch (error) {
                alert('Operation failed: ' + error.message);
            }
        });
    
        // Staff Functions
        function showAddStaffModal() {
            document.getElementById('staff-modal-title').textContent = 'Add New Staff';
            document.getElementById('staff-id').value = '';
            document.getElementById('staff-form').reset();
            showModal('staff-modal');
        }
    
        function showEditStaffModal(staff) {
            document.getElementById('staff-modal-title').textContent = 'Edit Staff';
            document.getElementById('staff-id').value = staff.id;
            document.getElementById('staff-name').value = staff.name;
            document.getElementById('staff-email').value = staff.email;
            document.getElementById('staff-position').value = staff.position;
            showModal('staff-modal');
        }
    
        async function loadStaff() {
            try {
                const staff = await fetchData('/admin/staff');
                const tbody = document.getElementById('staff-table-body');
                tbody.innerHTML = '';
                
                staff.forEach(staffMember => {
                    const tr = document.createElement('tr');
                    tr.innerHTML = `
                        <td>${staffMember.id}</td>
                        <td>${staffMember.name}</td>
                        <td>
                            <button class="action-btn edit-btn" onclick="showEditStaffModal(${JSON.stringify(staffMember).replace(/"/g, '&quot;')})">Edit</button>
                            <button class="action-btn delete-btn" onclick="deleteStaff(${staffMember.id})">Delete</button>
                        </td>
                    `;
                    tbody.appendChild(tr);
                });
            } catch (error) {
                alert('Failed to load staff: ' + error.message);
            }
        }
    
        async function deleteStaff(id) {
            if (confirm('Are you sure you want to delete this staff member?')) {
                try {
                    await fetchData(`/staff/${id}`, { method: 'DELETE' });
                    loadStaff();
                    updateDashboardCounts();
                } catch (error) {
                    alert('Failed to delete staff: ' + error.message);
                }
            }
        }
    
        document.getElementById('staff-form').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const staff = {
                name: document.getElementById('staff-name').value,
                email: document.getElementById('staff-email').value,
                position: document.getElementById('staff-position').value
            };
            
            const id = document.getElementById('staff-id').value;
            
            try {
                if (id) {
                    await fetchData(`/staff/${id}`, {
                        method: 'PUT',
                        body: JSON.stringify(staff)
                    });
                } else {
                    await fetchData('/staff', {
                        method: 'POST',
                        body: JSON.stringify(staff)
                    });
                }
                
                closeModal('staff-modal');
                loadStaff();
                updateDashboardCounts();
            } catch (error) {
                alert('Operation failed: ' + error.message);
            }
        });
    
        // Announcement Functions
        function showAddAnnouncementModal() {
            document.getElementById('announcement-modal-title').textContent = 'Add New Announcement';
            document.getElementById('announcement-id').value = '';
            document.getElementById('announcement-date').valueAsDate = new Date();
            document.getElementById('announcement-form').reset();
            showModal('announcement-modal');
        }
    
        function showEditAnnouncementModal(announcement) {
            document.getElementById('announcement-modal-title').textContent = 'Edit Announcement';
            document.getElementById('announcement-id').value = announcement.id;
            document.getElementById('announcement-title').value = announcement.title;
            document.getElementById('announcement-date').value = announcement.date;
            document.getElementById('announcement-content').value = announcement.content;
            showModal('announcement-modal');
        }
    
        async function loadAnnouncements() {
            try {
                const announcements = await fetchData('/common/announcements');
                const container = document.getElementById('announcements-list');
                container.innerHTML = '';
                
                announcements.slice(0, 3).forEach(announcement => {
                    const date = new Date(announcement.date);
                    const formattedDate = date.toLocaleDateString('en-US', { year: 'numeric', month: 'long', day: 'numeric' });
                    
                    const div = document.createElement('div');
                    div.className = 'announcement-item';
                    div.innerHTML = `
                        <div class="announcement-header">
                            <div class="announcement-title">${announcement.title}</div>
                            <div class="announcement-date">${formattedDate}</div>
                        </div>
                        <div class="announcement-content">${announcement.content}</div>
                    `;
                    container.appendChild(div);
                });
            } catch (error) {
                alert('Failed to load announcements: ' + error.message);
            }
        }
    
        async function loadAnnouncementsTable() {
            try {
                const announcements = await fetchData('/common/announcements');
                const tbody = document.getElementById('announcements-table-body');
                tbody.innerHTML = '';
                
                announcements.forEach(announcement => {
                    const date = new Date(announcement.date);
                    const formattedDate = date.toLocaleDateString('en-US', { year: 'numeric', month: 'short', day: 'numeric' });
                    
                    const tr = document.createElement('tr');
                    tr.innerHTML = `
                        <td>${announcement.id}</td>
                        <td>${announcement.title}</td>
                        <td>${formattedDate}</td>
                        <td>
                            <button class="action-btn edit-btn" onclick="showEditAnnouncementModal(${JSON.stringify(announcement).replace(/"/g, '&quot;')})">Edit</button>
                            <button class="action-btn delete-btn" onclick="deleteAnnouncement(${announcement.id})">Delete</button>
                        </td>
                    `;
                    tbody.appendChild(tr);
                });
            } catch (error) {
                alert('Failed to load announcements: ' + error.message);
            }
        }
    
        async function deleteAnnouncement(id) {
            if (confirm('Are you sure you want to delete this announcement?')) {
                try {
                    await fetchData(`/announcements/${id}`, { method: 'DELETE' });
                    loadAnnouncements();
                    loadAnnouncementsTable();
                    updateDashboardCounts();
                } catch (error) {
                    alert('Failed to delete announcement: ' + error.message);
                }
            }
        }
    
        document.getElementById('announcement-form').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const announcement = {
                title: document.getElementById('announcement-title').value,
                date: document.getElementById('announcement-date').value,
                content: document.getElementById('announcement-content').value
            };
            
            const id = document.getElementById('announcement-id').value;
            
            try {
                if (id) {
                    await fetchData(`/announcements/${id}`, {
                        method: 'PUT',
                        body: JSON.stringify(announcement)
                    });
                } else {
                    await fetchData('/announcements', {
                        method: 'POST',
                        body: JSON.stringify(announcement)
                    });
                }
                
                closeModal('announcement-modal');
                loadAnnouncements();
                loadAnnouncementsTable();
                updateDashboardCounts();
            } catch (error) {
                alert('Operation failed: ' + error.message);
            }
        });
    
        // Activity Functions
        async function loadActivities() {
            try {
                const activities = await fetchData('/admin/activities');
                const container = document.getElementById('activity-list');
                container.innerHTML = '';
                
                activities.slice(0, 4).forEach(activity => {
                    const li = document.createElement('li');
                    li.className = 'activity-item';
                    
                    let iconClass = 'fas fa-user';
                    if (activity.type === 'teacher') iconClass = 'fas fa-chalkboard-teacher';
                    else if (activity.type === 'staff') iconClass = 'fas fa-user-tie';
                    else if (activity.type === 'announcement') iconClass = 'fas fa-bullhorn';
                    
                    li.innerHTML = `
                        <div class="activity-icon">
                            <i class="${iconClass}"></i>
                        </div>
                        <div class="activity-info">
                            <h4>${activity.action}</h4>
                            <p>${activity.details}</p>
                        </div>
                        <div class="activity-time">${formatActivityTime(activity.created_at)}</div>
                    `;
                    container.appendChild(li);
                });
            } catch (error) {
                console.error('Failed to load activities:', error);
            }
        }
    
        function formatActivityTime(timestamp) {
            const now = new Date();
            const activityTime = new Date(timestamp);
            const diffInSeconds = Math.floor((now - activityTime) / 1000);
            
            if (diffInSeconds < 60) return 'Just now';
            if (diffInSeconds < 3600) return `${Math.floor(diffInSeconds / 60)} min ago`;
            if (diffInSeconds < 86400) return `${Math.floor(diffInSeconds / 3600)} hours ago`;
            return `${Math.floor(diffInSeconds / 86400)} days ago`;
        }
    
        // Dashboard Functions
        async function updateDashboardCounts() {
            try {
                const counts = await fetchData('admin/dashboard');
                document.getElementById('students-count').textContent = counts.total_students;
                document.getElementById('teachers-count').textContent = counts.total_teachers;
                document.getElementById('staff-count').textContent = counts.total_staff;
                document.getElementById('announcements-count').textContent = counts.total_announcements;
            } catch (error) {
                console.error('Failed to update dashboard counts:', error);
            }
        }
    
        // Initialize the dashboard
        document.addEventListener('DOMContentLoaded', function() {
            showDashboard();
        });
    </script>
</body>
</html>