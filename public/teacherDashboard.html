<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Teacher Dashboard - School Management System</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Sidebar -->
    <div class="sidebar">
        <div class="sidebar-header">
            <i class="fas fa-chalkboard-teacher fa-2x"></i>
            <h3>Teacher Portal</h3>
        </div>
        <div class="sidebar-menu">
            <ul>
                <li><a href="#" class="active" onclick="showDashboard()"><i class="fas fa-tachometer-alt"></i> <span>Dashboard</span></a></li>
                <li><a href="#" onclick="showClasses()"><i class="fas fa-users"></i> <span>My Classes</span></a></li>
                <li><a href="#" onclick="showAssignments()"><i class="fas fa-tasks"></i> <span>Assignments</span></a></li>
                <li><a href="#" onclick="showStudents()"><i class="fas fa-user-graduate"></i> <span>Students</span></a></li>
                <li><a href="#" onclick="showAnnouncements()"><i class="fas fa-bullhorn"></i> <span>Announcements</span></a></li>
            </ul>
        </div>
        <div class="theme-switcher">
            <button data-theme="light">Light</button>
            <button data-theme="dark">Dark</button>
            <button data-theme="high-contrast">High Contrast</button>
            <button data-theme="blue">Blue</button>
        </div>
    </div>

    <!-- Main Content -->
    <div class="main-content">
        <!-- Dashboard Section -->
        <div id="dashboard-section">
            <!-- Header -->
            <div class="header">
                <h1>Teacher Dashboard</h1>
                <div class="user-profile" onclick="showProfile()">
                    <img src="https://ui-avatars.com/api/?name=John+Doe&background=3a86ff&color=fff" alt="Teacher User">
                    <div class="user-info">
                        <h4>John Doe</h4>
                        <p>Mathematics Teacher</p>
                    </div>
                </div>
            </div>

            <!-- Cards -->
            <div class="cards-container">
                <div class="card">
                    <div class="card-header">
                        <div>
                            <h3 id="students-count">0</h3>
                            <p>Students</p>
                        </div>
                        <div class="card-icon students">
                            <i class="fas fa-user-graduate"></i>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <div>
                            <h3 id="classes-count">0</h3>
                            <p>Classes</p>
                        </div>
                        <div class="card-icon classes">
                            <i class="fas fa-users"></i>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <div>
                            <h3 id="assignments-count">0</h3>
                            <p>Assignments</p>
                        </div>
                        <div class="card-icon assignments">
                            <i class="fas fa-tasks"></i>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <div>
                            <h3 id="announcements-count">0</h3>
                            <p>Announcements</p>
                        </div>
                        <div class="card-icon announcements-card">
                            <i class="fas fa-bullhorn"></i>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Recent Activity -->
            <div class="recent-activity">
                <div class="section-header">
                    <h2>Recent Activity</h2>
                    <a href="#">View All</a>
                </div>
                <ul class="activity-list" id="activity-list">
                    <!-- Activity items will be added here dynamically -->
                </ul>
            </div>

            <!-- Upcoming Classes -->
            <div class="classes-section">
                <div class="section-header">
                    <h2>Today's Classes</h2>
                    <a href="#">View All</a>
                </div>
                <div class="class-item">
                    <!-- Class items will be added here dynamically -->
                </div>
            </div>
        </div>

        <!-- Classes Section -->
        <div id="classes-section" style="display: none;">
            <div class="header">
                <h1>My Classes</h1>
                <button class="btn btn-add" onclick="showAddClassModal()">Add Class</button>
            </div>
            <table class="data-table">
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Class Name</th>
                        <th>Grade Level</th>
                        <th>Schedule</th>
                        <th>Room</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody id="classes-table-body">
                    <!-- Class rows will be added here dynamically -->
                </tbody>
            </table>
        </div>

        <!-- Assignments Section -->
        <div id="assignments-section" style="display: none;">
            <div class="header">
                <h1>Assignments</h1>
                <button class="btn btn-add" onclick="showAddAssignmentModal()">Add Assignment</button>
            </div>
            <table class="data-table">
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Title</th>
                        <th>Class</th>
                        <th>Due Date</th>
                        <th>Status</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody id="assignments-table-body">
                    <!-- Assignment rows will be added here dynamically -->
                </tbody>
            </table>
        </div>

        <!-- Students Section -->
        <div id="students-section" style="display: none;">
            <div class="header">
                <h1>My Students</h1>
                <button class="btn btn-add" onclick="showAddStudentModal()">Add Student</button>
            </div>
            <table class="data-table">
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Name</th>
                        <th>Class</th>
                        <th>Grade</th>
                        <th>Email</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody id="students-table-body">
                    <!-- Student rows will be added here dynamically -->
                </tbody>
            </table>
        </div>

        <!-- Announcements Section -->
        <div id="announcements-section" style="display: none;">
            <div class="header">
                <h1>Announcements</h1>
                <button class="btn btn-add" onclick="showAddAnnouncementModal()">Add Announcement</button>
            </div>
            <table class="data-table">
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Title</th>
                        <th>Date</th>
                        <th>Class</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody id="announcements-table-body">
                    <!-- Announcement rows will be added here dynamically -->
                </tbody>
            </table>
        </div>
    </div>

    <!-- Add Class Modal -->
    <div id="class-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="class-modal-title">Add New Class</h2>
                <button class="close-btn" onclick="closeModal('class-modal')">&times;</button>
            </div>
            <form id="class-form">
                <input type="hidden" id="class-id">
                <div class="form-group">
                    <label for="class-name">Class Name</label>
                    <input type="text" id="class-name" required>
                </div>
                <div class="form-group">
                    <label for="class-grade">Grade Level</label>
                    <select id="class-grade" required>
                        <option value="">Select Grade</option>
                        <option value="Grade 9">Grade 9</option>
                        <option value="Grade 10">Grade 10</option>
                        <option value="Grade 11">Grade 11</option>
                        <option value="Grade 12">Grade 12</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="class-schedule">Schedule</label>
                    <input type="text" id="class-schedule" placeholder="Mon/Wed 9:00-10:00" required>
                </div>
                <div class="form-group">
                    <label for="class-room">Room Number</label>
                    <input type="text" id="class-room" required>
                </div>
                <div class="form-actions">
                    <button type="button" class="btn btn-cancel" onclick="closeModal('class-modal')">Cancel</button>
                    <button type="submit" class="btn">Save</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Add Assignment Modal -->
    <div id="assignment-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="assignment-modal-title">Add New Assignment</h2>
                <button class="close-btn" onclick="closeModal('assignment-modal')">&times;</button>
            </div>
            <form id="assignment-form">
                <input type="hidden" id="assignment-id">
                <div class="form-group">
                    <label for="assignment-title">Title</label>
                    <input type="text" id="assignment-title" required>
                </div>
                <div class="form-group">
                    <label for="assignment-class">Class</label>
                    <select id="assignment-class" required>
                        <option value="">Select Class</option>
                        <option value="1">Grade 9 - Algebra</option>
                        <option value="2">Grade 10 - Geometry</option>
                        <option value="3">Grade 11 - Calculus</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="assignment-due">Due Date</label>
                    <input type="date" id="assignment-due" required>
                </div>
                <div class="form-group">
                    <label for="assignment-description">Description</label>
                    <textarea id="assignment-description" required></textarea>
                </div>
                <div class="form-actions">
                    <button type="button" class="btn btn-cancel" onclick="closeModal('assignment-modal')">Cancel</button>
                    <button type="submit" class="btn">Save</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Add Student Modal -->
    <div id="student-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="student-modal-title">Add New Student</h2>
                <button class="close-btn" onclick="closeModal('student-modal')">&times;</button>
            </div>
            <form id="student-form">
                <input type="hidden" id="student-id">
                <div class="form-group">
                    <label for="student-name">Full Name</label>
                    <input type="text" id="student-name" required>
                </div>
                <div class="form-group">
                    <label for="student-email">Email</label>
                    <input type="email" id="student-email" required>
                </div>
                <div class="form-group">
                    <label for="student-class">Class</label>
                    <select id="student-class" required>
                        <option value="">Select Class</option>
                        <option value="1">Grade 9 - Algebra</option>
                        <option value="2">Grade 10 - Geometry</option>
                        <option value="3">Grade 11 - Calculus</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="student-grade">Grade</label>
                    <input type="text" id="student-grade" placeholder="A, B, C, etc.">
                </div>
                <div class="form-actions">
                    <button type="button" class="btn btn-cancel" onclick="closeModal('student-modal')">Cancel</button>
                    <button type="submit" class="btn">Save</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Add Announcement Modal -->
    <div id="announcement-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="announcement-modal-title">Add New Announcement</h2>
                <button class="close-btn" onclick="closeModal('announcement-modal')">&times;</button>
            </div>
            <form id="announcement-form">
                <input type="hidden" id="announcement-id">
                <div class="form-group">
                    <label for="announcement-title">Title</label>
                    <input type="text" id="announcement-title" required>
                </div>
                <div class="form-group">
                    <label for="announcement-class">Class</label>
                    <select id="announcement-class">
                        <option value="0">All Classes</option>
                        <option value="1">Grade 9 - Algebra</option>
                        <option value="2">Grade 10 - Geometry</option>
                        <option value="3">Grade 11 - Calculus</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="announcement-date">Date</label>
                    <input type="date" id="announcement-date" required>
                </div>
                <div class="form-group">
                    <label for="announcement-content">Content</label>
                    <textarea id="announcement-content" required></textarea>
                </div>
                <div class="form-actions">
                    <button type="button" class="btn btn-cancel" onclick="closeModal('announcement-modal')">Cancel</button>
                    <button type="submit" class="btn">Save</button>
                </div>
            </form>
        </div>
    </div>

    <script>
        // Replace these URLs with your actual backend endpoints
        const API_BASE_URL = "http://localhost:3000";

        // Utility to fetch and handle errors
        async function fetchData(url, options = {}) {
            try {
                const response = await fetch(url, options);
                if (!response.ok) throw new Error("Network response was not ok");
                return await response.json();
            } catch (error) {
                console.error("API Error:", error);
                alert("An error occurred. See console for details.");
            }
        }

        // Dashboard counters
        async function updateDashboardCounts() {
            const students = await fetchData(`${API_BASE_URL}/students`);
            const classes = await fetchData(`${API_BASE_URL}/classes`);
            const assignments = await fetchData(`${API_BASE_URL}/assignments`);
            const announcements = await fetchData(`${API_BASE_URL}/announcements`);

            document.getElementById("students-count").textContent = students?.length || 0;
            document.getElementById("classes-count").textContent = classes?.length || 0;
            document.getElementById("assignments-count").textContent = assignments?.length || 0;
            document.getElementById("announcements-count").textContent = announcements?.length || 0;
        }

        // CRUD Operations for Classes
        async function loadClasses() {
            const classes = await fetchData(`${API_BASE_URL}/classes`);
            const tbody = document.getElementById("classes-table-body");
            tbody.innerHTML = "";
            classes?.forEach(cls => {
                const row = `<tr>
                    <td>${cls.id}</td>
                    <td>${cls.name}</td>
                    <td>${cls.grade}</td>
                    <td>${cls.schedule}</td>
                    <td>${cls.room}</td>
                    <td>
                        <button onclick="editClass(${cls.id})">Edit</button>
                        <button onclick="deleteClass(${cls.id})">Delete</button>
                    </td>
                </tr>`;
                tbody.innerHTML += row;
            });
        }

        async function addOrUpdateClass(event) {
            event.preventDefault();
            const id = document.getElementById("class-id").value;
            const cls = {
                name: document.getElementById("class-name").value,
                grade: document.getElementById("class-grade").value,
                schedule: document.getElementById("class-schedule").value,
                room: document.getElementById("class-room").value,
            };

            if (id) {
                await fetchData(`${API_BASE_URL}/classes/${id}`, {
                    method: "PUT",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify(cls),
                });
            } else {
                await fetchData(`${API_BASE_URL}/classes`, {
                    method: "POST",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify(cls),
                });
            }
            closeModal('class-modal');
            loadClasses();
            updateDashboardCounts();
        }

        async function deleteClass(id) {
            if (confirm("Are you sure you want to delete this class?")) {
                await fetchData(`${API_BASE_URL}/classes/${id}`, { method: "DELETE" });
                loadClasses();
                updateDashboardCounts();
            }
        }

        function editClass(id) {
            fetchData(`${API_BASE_URL}/classes/${id}`).then(cls => {
                document.getElementById("class-id").value = cls.id;
                document.getElementById("class-name").value = cls.name;
                document.getElementById("class-grade").value = cls.grade;
                document.getElementById("class-schedule").value = cls.schedule;
                document.getElementById("class-room").value = cls.room;
                document.getElementById("class-modal-title").textContent = "Edit Class";
                document.getElementById("class-modal").style.display = "block";
            });
        }

        function showAddClassModal() {
            document.getElementById("class-id").value = "";
            document.getElementById("class-form").reset();
            document.getElementById("class-modal-title").textContent = "Add New Class";
            document.getElementById("class-modal").style.display = "block";
        }

        // CRUD Operations for Students
        async function loadStudents() {
            const students = await fetchData(`${API_BASE_URL}/students`);
            const tbody = document.getElementById("students-table-body");
            tbody.innerHTML = "";
            students?.forEach(student => {
                const row = `<tr>
                    <td>${student.id}</td>
                    <td>${student.name}</td>
                    <td>${student.class}</td>
                    <td>${student.grade || '-'}</td>
                    <td>${student.email}</td>
                    <td>
                        <button onclick="editStudent(${student.id})">Edit</button>
                        <button onclick="deleteStudent(${student.id})">Delete</button>
                    </td>
                </tr>`;
                tbody.innerHTML += row;
            });
        }

        async function addOrUpdateStudent(event) {
            event.preventDefault();
            const id = document.getElementById("student-id").value;
            const student = {
                name: document.getElementById("student-name").value,
                email: document.getElementById("student-email").value,
                class: document.getElementById("student-class").value,
                grade: document.getElementById("student-grade").value,
            };

            if (id) {
                await fetchData(`${API_BASE_URL}/students/${id}`, {
                    method: "PUT",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify(student),
                });
            } else {
                await fetchData(`${API_BASE_URL}/students`, {
                    method: "POST",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify(student),
                });
            }
            closeModal('student-modal');
            loadStudents();
            updateDashboardCounts();
        }

        async function deleteStudent(id) {
            if (confirm("Are you sure you want to delete this student?")) {
                await fetchData(`${API_BASE_URL}/students/${id}`, { method: "DELETE" });
                loadStudents();
                updateDashboardCounts();
            }
        }

        function editStudent(id) {
            fetchData(`${API_BASE_URL}/students/${id}`).then(student => {
                document.getElementById("student-id").value = student.id;
                document.getElementById("student-name").value = student.name;
                document.getElementById("student-email").value = student.email;
                document.getElementById("student-class").value = student.class;
                document.getElementById("student-grade").value = student.grade;
                document.getElementById("student-modal-title").textContent = "Edit Student";
                document.getElementById("student-modal").style.display = "block";
            });
        }

        function showAddStudentModal() {
            document.getElementById("student-id").value = "";
            document.getElementById("student-form").reset();
            document.getElementById("student-modal-title").textContent = "Add New Student";
            document.getElementById("student-modal").style.display = "block";
        }

        // CRUD Operations for Assignments
        async function loadAssignments() {
            const assignments = await fetchData(`${API_BASE_URL}/assignments`);
            const tbody = document.getElementById("assignments-table-body");
            tbody.innerHTML = "";
            assignments?.forEach(assignment => {
                const row = `<tr>
                    <td>${assignment.id}</td>
                    <td>${assignment.title}</td>
                    <td>${assignment.class}</td>
                    <td>${new Date(assignment.dueDate).toLocaleDateString()}</td>
                    <td>${assignment.status || 'Pending'}</td>
                    <td>
                        <button onclick="editAssignment(${assignment.id})">Edit</button>
                        <button onclick="deleteAssignment(${assignment.id})">Delete</button>
                    </td>
                </tr>`;
                tbody.innerHTML += row;
            });
        }

        async function addOrUpdateAssignment(event) {
            event.preventDefault();
            const id = document.getElementById("assignment-id").value;
            const assignment = {
                title: document.getElementById("assignment-title").value,
                class: document.getElementById("assignment-class").value,
                dueDate: document.getElementById("assignment-due").value,
                description: document.getElementById("assignment-description").value,
                status: "Pending"
            };

            if (id) {
                await fetchData(`${API_BASE_URL}/assignments/${id}`, {
                    method: "PUT",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify(assignment),
                });
            } else {
                await fetchData(`${API_BASE_URL}/assignments`, {
                    method: "POST",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify(assignment),
                });
            }
            closeModal('assignment-modal');
            loadAssignments();
            updateDashboardCounts();
        }

        async function deleteAssignment(id) {
            if (confirm("Are you sure you want to delete this assignment?")) {
                await fetchData(`${API_BASE_URL}/assignments/${id}`, { method: "DELETE" });
                loadAssignments();
                updateDashboardCounts();
            }
        }

        function editAssignment(id) {
            fetchData(`${API_BASE_URL}/assignments/${id}`).then(assignment => {
                document.getElementById("assignment-id").value = assignment.id;
                document.getElementById("assignment-title").value = assignment.title;
                document.getElementById("assignment-class").value = assignment.class;
                document.getElementById("assignment-due").value = assignment.dueDate;
                document.getElementById("assignment-description").value = assignment.description;
                document.getElementById("assignment-modal-title").textContent = "Edit Assignment";
                document.getElementById("assignment-modal").style.display = "block";
            });
        }

        function showAddAssignmentModal() {
            document.getElementById("assignment-id").value = "";
            document.getElementById("assignment-form").reset();
            document.getElementById("assignment-modal-title").textContent = "Add New Assignment";
            document.getElementById("assignment-modal").style.display = "block";
        }

        // CRUD Operations for Announcements
        async function loadAnnouncements() {
            const announcements = await fetchData(`${API_BASE_URL}/announcements`);
            const tbody = document.getElementById("announcements-table-body");
            tbody.innerHTML = "";
            announcements?.forEach(announcement => {
                const row = `<tr>
                    <td>${announcement.id}</td>
                    <td>${announcement.title}</td>
                    <td>${new Date(announcement.date).toLocaleDateString()}</td>
                    <td>${announcement.class || 'All Classes'}</td>
                    <td>
                        <button onclick="editAnnouncement(${announcement.id})">Edit</button>
                        <button onclick="deleteAnnouncement(${announcement.id})">Delete</button>
                    </td>
                </tr>`;
                tbody.innerHTML += row;
            });
        }

        async function addOrUpdateAnnouncement(event) {
            event.preventDefault();
            const id = document.getElementById("announcement-id").value;
            const announcement = {
                title: document.getElementById("announcement-title").value,
                class: document.getElementById("announcement-class").value,
                date: document.getElementById("announcement-date").value,
                content: document.getElementById("announcement-content").value
            };

            if (id) {
                await fetchData(`${API_BASE_URL}/announcements/${id}`, {
                    method: "PUT",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify(announcement),
                });
            } else {
                await fetchData(`${API_BASE_URL}/announcements`, {
                    method: "POST",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify(announcement),
                });
            }
            closeModal('announcement-modal');
            loadAnnouncements();
            updateDashboardCounts();
        }

        async function deleteAnnouncement(id) {
            if (confirm("Are you sure you want to delete this announcement?")) {
                await fetchData(`${API_BASE_URL}/announcements/${id}`, { method: "DELETE" });
                loadAnnouncements();
                updateDashboardCounts();
            }
        }

        function editAnnouncement(id) {
            fetchData(`${API_BASE_URL}/announcements/${id}`).then(announcement => {
                document.getElementById("announcement-id").value = announcement.id;
                document.getElementById("announcement-title").value = announcement.title;
                document.getElementById("announcement-class").value = announcement.class;
                document.getElementById("announcement-date").value = announcement.date;
                document.getElementById("announcement-content").value = announcement.content;
                document.getElementById("announcement-modal-title").textContent = "Edit Announcement";
                document.getElementById("announcement-modal").style.display = "block";
            });
        }

        function showAddAnnouncementModal() {
            document.getElementById("announcement-id").value = "";
            document.getElementById("announcement-form").reset();
            document.getElementById("announcement-modal-title").textContent = "Add New Announcement";
            document.getElementById("announcement-modal").style.display = "block";
        }

        // Modal Controls
        function closeModal(modalId) {
            document.getElementById(modalId).style.display = "none";
        }

        // Navigation
        function showDashboard() {
            toggleSections("dashboard-section");
            updateDashboardCounts();
        }

        function showClasses() {
            toggleSections("classes-section");
            loadClasses();
        }

        function showAssignments() {
            toggleSections("assignments-section");
            loadAssignments();
        }

        function showStudents() {
            toggleSections("students-section");
            loadStudents();
        }

        function showAnnouncements() {
            toggleSections("announcements-section");
            loadAnnouncements();
        }

        function toggleSections(visibleId) {
            const sections = [
                "dashboard-section",
                "classes-section",
                "assignments-section",
                "students-section",
                "announcements-section"
            ];
            sections.forEach(id => {
                document.getElementById(id).style.display = (id === visibleId) ? "block" : "none";
            });
        }

        // Initialize the application
        window.addEventListener("DOMContentLoaded", () => {
            // Set dashboard as default view
            showDashboard();
            
            // Add form event listeners
            document.getElementById("class-form").addEventListener("submit", addOrUpdateClass);
            document.getElementById("student-form").addEventListener("submit", addOrUpdateStudent);
            document.getElementById("assignment-form").addEventListener("submit", addOrUpdateAssignment);
            document.getElementById("announcement-form").addEventListener("submit", addOrUpdateAnnouncement);
        });
        document.addEventListener('DOMContentLoaded', function() {
    // Check for saved theme preference or use preferred color scheme
    const savedTheme = localStorage.getItem('theme') || 
                      (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light');
    document.documentElement.setAttribute('data-theme', savedTheme);
    
    // Set up theme switcher buttons
    document.querySelectorAll('[data-theme]').forEach(button => {
        button.addEventListener('click', function() {
            const theme = this.getAttribute('data-theme');
            document.documentElement.setAttribute('data-theme', theme);
            localStorage.setItem('theme', theme);
        });
    });
});
    </script>
</body>
</html>